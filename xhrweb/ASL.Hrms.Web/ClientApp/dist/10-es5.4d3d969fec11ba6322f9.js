!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jkDv:function(n,l,o){"use strict";o.r(l),o.d(l,"AdminModule",(function(){return R}));var i=o("tyNb"),s=o("PCNd"),a=o("40fR"),r=o("Vvy3"),c=o("Yj9t"),d=o("TwVa"),u=o("ZF+8"),m=o("Cmua"),p=o("fXoL"),f=o("3Pt+"),g=o("ofXK"),v=o("kmnG"),h=o("d3UM"),y=o("e/mZ"),S=o("FKr1");function b(e,t){1&e&&p["\u0275\u0275element"](0,"div",14)}function I(e,t){if(1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"mat-option",15),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("value",n.id),p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate"](n.fullName)}}function k(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",16),p["\u0275\u0275text"](1," Please select an employee "),p["\u0275\u0275elementEnd"]())}function E(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",16),p["\u0275\u0275text"](1," User Id not found "),p["\u0275\u0275elementEnd"]())}function A(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"span",17),p["\u0275\u0275text"](1," Please select roles "),p["\u0275\u0275elementEnd"]())}var w,x,C=[{path:"assign-role",component:(w=function(){function n(t,l,o,i,s){e(this,n),this.employeeService=t,this.alertService=l,this.companyService=o,this.formBuilder=i,this.roleManagementService=s,this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.loading=!1,this.submitted=!1,this.companyId=localStorage.getItem("companyId"),this.roleNames=[],this.userNotFound=!1}var l,o,i;return l=n,(o=[{key:"ngOnInit",value:function(){this.getAllCompanies(),this.getAllEmployees(),this.getAllRoles(),this.allColors=[{id:1,value:"red"},{id:2,value:"greed"}],this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={singleSelection:!1,text:"Select Roles",selectAllText:"Select All",unSelectAllText:"UnSelect All",enableSearchFilter:!0,classes:"myclass custom-class"}}},{key:"getAllEmployees",value:function(){var e=this;this.loading=!0,this.employeeService.getAllEmployees().subscribe((function(t){e.employees=t,e.loading=!1}),(function(){}))}},{key:"getAllCompanies",value:function(){var e=this;this.companyService.getAllCompanies().subscribe((function(t){e.companies=t}))}},{key:"onSubmit",value:function(){this.submitted=!0,this.roleNames=this.selectedItems.map((function(e){return e.itemName})),void 0!==this.employeeId&&0!==this.roleNames.length&&this.updateRoles()}},{key:"onChangeRole",value:function(e){}},{key:"getAllRoles",value:function(){var e=this;this.loading=!0,this.roleManagementService.getRoles().subscribe((function(t){e.roles=t,e.loading=!1,e.addItemName(t)}),(function(){e.loading=!1}))}},{key:"getRolesByEmployee",value:function(e){var t=this;this.loading=!0,this.userNotFound=!1,this.submitted=!1,this.roleManagementService.getRolesByEmployee(e).subscribe((function(e){t.loading=!1,t.users=e,t.selectedItems=e}),(function(){t.loading=!1}))}},{key:"onChangeEmployee",value:function(e){this.getRolesByEmployee(e.value),this.employeeId=e.value}},{key:"onItemSelect",value:function(e){}},{key:"onSelectAll",value:function(e){}},{key:"addItemName",value:function(e){for(var t=0;t<e.length;t++)e[t].itemName=e[t].name;this.dropdownList=e}},{key:"OnItemDeSelect",value:function(e){}},{key:"onDeSelectAll",value:function(e){}},{key:"updateRoles",value:function(){var e=this;try{this.loading=!0;var t=this.users.find((function(t){return t.id===e.employeeId})).userId;this.userRoles=new d.Db,this.userRoles.userId=t;var n=this.selectedItems.map((function(e){return e.itemName}));this.userRoles.roles=n,this.roleManagementService.assignRoles(this.userRoles).subscribe((function(t){e.loading=!1,!0===t&&e.alertService.success("Roles assign success")}),(function(){e.loading=!1}))}catch(l){this.loading=!1,this.userNotFound=!0}}}])&&t(l.prototype,o),i&&t(l,i),n}(),w.\u0275fac=function(e){return new(e||w)(p["\u0275\u0275directiveInject"](u.U),p["\u0275\u0275directiveInject"](m.a),p["\u0275\u0275directiveInject"](u.u),p["\u0275\u0275directiveInject"](f.g),p["\u0275\u0275directiveInject"](u.mb))},w.\u0275cmp=p["\u0275\u0275defineComponent"]({type:w,selectors:[["app-role-management"]],decls:18,vars:9,consts:[["class","spinner-border","style","position:fixed;z-index:9999;left:50%;top:30%; color:#218838;","role","status",4,"ngIf"],[1,"row","d-flex","justify-content-between","mt-3","mb-3"],[1,"col-sm-12","col-md-12"],["id","tableLabel"],[1,"row"],[1,"col-12","col-md-4","col-lg-3"],["appearance","outline"],["matInput","","placeholder","Select Employee",3,"value","valueChange","selectionChange"],[4,"ngFor","ngForOf"],["class","d-block text-danger error",4,"ngIf"],[1,"multi-select",3,"data","ngModel","settings","ngModelChange","onSelect","onDeSelect","onSelectAll","onDeSelectAll"],["class","d-block text-danger",4,"ngIf"],[1,"col-12","col-md-12","col-lg-3","p-0","mt-10"],["type","submit",1,"btn","btn-success",2,"font-size","smaller",3,"click"],["role","status",1,"spinner-border",2,"position","fixed","z-index","9999","left","50%","top","30%","color","#218838"],[3,"value"],[1,"d-block","text-danger","error"],[1,"d-block","text-danger"]],template:function(e,t){1&e&&(p["\u0275\u0275template"](0,b,1,0,"div",0),p["\u0275\u0275elementStart"](1,"div",1),p["\u0275\u0275elementStart"](2,"div",2),p["\u0275\u0275elementStart"](3,"h1",3),p["\u0275\u0275text"](4,"Assign Role"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"div",4),p["\u0275\u0275elementStart"](6,"div",5),p["\u0275\u0275elementStart"](7,"mat-form-field",6),p["\u0275\u0275elementStart"](8,"mat-select",7),p["\u0275\u0275listener"]("valueChange",(function(e){return t.employeeId=e}))("selectionChange",(function(e){return t.onChangeEmployee(e)})),p["\u0275\u0275template"](9,I,3,2,"ng-container",8),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](10,k,2,0,"span",9),p["\u0275\u0275template"](11,E,2,0,"span",9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"div",5),p["\u0275\u0275elementStart"](13,"angular2-multiselect",10),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectedItems=e}))("onSelect",(function(e){return t.onItemSelect(e)}))("onDeSelect",(function(e){return t.OnItemDeSelect(e)}))("onSelectAll",(function(e){return t.onSelectAll(e)}))("onDeSelectAll",(function(e){return t.onDeSelectAll(e)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](14,A,2,0,"span",11),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"div",12),p["\u0275\u0275elementStart"](16,"button",13),p["\u0275\u0275listener"]("click",(function(){return t.onSubmit()})),p["\u0275\u0275text"](17," Save"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("ngIf",t.loading),p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("value",t.employeeId),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",t.employees),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",null==t.employeeId&&t.submitted),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.userNotFound&&t.submitted),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("data",t.dropdownList)("ngModel",t.selectedItems)("settings",t.dropdownSettings),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",0===t.roleNames.length&&t.submitted))},directives:[g.t,v.c,h.a,g.s,y.a,f.s,f.v,S.m],styles:[".c-btn{background-color:#fff;border:2px solid green}.multi-select[_ngcontent-%COMP%]{display:block;margin-top:4px}.error[_ngcontent-%COMP%]{margin-top:-23px}"]}),w),canActivate:[r.a],data:{roles:["Administrators"]}}],R=((x=function t(){e(this,t)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},imports:[[s.a,c.AuthModule,a.a,y.b,i.g.forChild(C)]]}),x)}}])}();